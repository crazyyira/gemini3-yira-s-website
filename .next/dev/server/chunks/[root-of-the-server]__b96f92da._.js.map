{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yira/Documents/code/gemini3-yira-s-website/app/api/admin/login/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const { username, password } = await request.json();\r\n\r\n    const adminUsername = process.env.ADMIN_USERNAME;\r\n    const adminPassword = process.env.ADMIN_PASSWORD;\r\n\r\n    if (!adminUsername || !adminPassword) {\r\n      return NextResponse.json({ error: \"服务器配置错误\" }, { status: 500 });\r\n    }\r\n\r\n    if (username === adminUsername && password === adminPassword) {\r\n      // 创建一个简单的 session token\r\n      const token = Buffer.from(`${username}:${Date.now()}`).toString('base64');\r\n      \r\n      const response = NextResponse.json({ success: true });\r\n      response.cookies.set('admin_token', token, {\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        sameSite: 'strict',\r\n        maxAge: 60 * 60 * 24, // 24 hours\r\n      });\r\n      \r\n      return response;\r\n    }\r\n\r\n    return NextResponse.json({ error: \"用户名或密码错误\" }, { status: 401 });\r\n  } catch (error) {\r\n    console.error(\"Login error:\", error);\r\n    return NextResponse.json({ error: \"服务器错误\" }, { status: 500 });\r\n  }\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjD,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc;QAChD,MAAM,gBAAgB,QAAQ,GAAG,CAAC,cAAc;QAEhD,IAAI,CAAC,iBAAiB,CAAC,eAAe;YACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAU,GAAG;gBAAE,QAAQ;YAAI;QAC/D;QAEA,IAAI,aAAa,iBAAiB,aAAa,eAAe;YAC5D,wBAAwB;YACxB,MAAM,QAAQ,OAAO,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,KAAK,GAAG,IAAI,EAAE,QAAQ,CAAC;YAEhE,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAK;YACnD,SAAS,OAAO,CAAC,GAAG,CAAC,eAAe,OAAO;gBACzC,UAAU;gBACV,QAAQ,oDAAyB;gBACjC,UAAU;gBACV,QAAQ,KAAK,KAAK;YACpB;YAEA,OAAO;QACT;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAW,GAAG;YAAE,QAAQ;QAAI;IAChE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IAC7D;AACF"}}]
}