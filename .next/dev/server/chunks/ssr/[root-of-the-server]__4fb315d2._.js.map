{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Yira/Documents/code/gemini3-yira-s-website/app/admin/event-registrations/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion } from \"motion/react\";\r\nimport { ArrowLeft, Calendar, Users, ChevronRight } from \"lucide-react\";\r\n\r\ninterface Event {\r\n  id: number;\r\n  title: string;\r\n  time: string;\r\n  location: string;\r\n}\r\n\r\ninterface RegistrationCount {\r\n  event_id: number;\r\n  total: number;\r\n  pending: number;\r\n  confirmed: number;\r\n  attended: number;\r\n  absent: number;\r\n}\r\n\r\nexport default function EventRegistrationsOverview() {\r\n  const router = useRouter();\r\n  const [events, setEvents] = useState<Event[]>([]);\r\n  const [registrationCounts, setRegistrationCounts] = useState<{ [key: number]: RegistrationCount }>({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const checkAuth = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/admin/check\");\r\n      if (!res.ok) {\r\n        router.push(\"/admin\");\r\n        return;\r\n      }\r\n      fetchData();\r\n    } catch (error) {\r\n      router.push(\"/admin\");\r\n    }\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      // Ëé∑ÂèñÊâÄÊúâÊ¥ªÂä®\r\n      const eventsRes = await fetch(\"/api/events\");\r\n      const eventsData = await eventsRes.json();\r\n      setEvents(eventsData || []);\r\n\r\n      // Ëé∑ÂèñÊØè‰∏™Ê¥ªÂä®ÁöÑÊä•ÂêçÁªüËÆ°\r\n      const counts: { [key: number]: RegistrationCount } = {};\r\n      for (const event of eventsData) {\r\n        const regRes = await fetch(`/api/events/${event.id}/registrations`);\r\n        const regData = await regRes.json();\r\n        \r\n        counts[event.id] = {\r\n          event_id: event.id,\r\n          total: regData.length,\r\n          pending: regData.filter((r: any) => r.status === \"pending\").length,\r\n          confirmed: regData.filter((r: any) => r.status === \"confirmed\").length,\r\n          attended: regData.filter((r: any) => r.status === \"attended\").length,\r\n          absent: regData.filter((r: any) => r.status === \"absent\").length,\r\n        };\r\n      }\r\n      setRegistrationCounts(counts);\r\n    } catch (error) {\r\n      console.error(\"Failed to load data:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#0a0510] flex items-center justify-center\">\r\n        <div className=\"text-white/40\">Âä†ËΩΩ‰∏≠...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalRegistrations = Object.values(registrationCounts).reduce((sum, count) => sum + count.total, 0);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#0a0510] text-white py-12 px-6\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"mb-8\">\r\n          <button\r\n            onClick={() => router.push(\"/admin/dashboard\")}\r\n            className=\"flex items-center gap-2 text-white/60 hover:text-white mb-4 transition-colors\"\r\n          >\r\n            <ArrowLeft className=\"w-4 h-4\" />\r\n            ËøîÂõûÂêéÂè∞\r\n          </button>\r\n          <h1 className=\"text-4xl font-display italic mb-2\">Ê¥ªÂä®Êä•ÂêçÁÆ°ÁêÜ</h1>\r\n          <p className=\"text-white/40\">Êü•ÁúãÂíåÁÆ°ÁêÜÊâÄÊúâÊ¥ªÂä®ÁöÑÊä•ÂêçÊÉÖÂÜµ</p>\r\n        </div>\r\n\r\n        {/* ÁªüËÆ°Âç°Áâá */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"glass p-6\">\r\n            <div className=\"text-white/40 text-sm mb-2\">Ê¥ªÂä®ÊÄªÊï∞</div>\r\n            <div className=\"text-3xl font-bold\">{events.length}</div>\r\n          </div>\r\n          <div className=\"glass p-6\">\r\n            <div className=\"text-white/40 text-sm mb-2\">ÊÄªÊä•ÂêçÊï∞</div>\r\n            <div className=\"text-3xl font-bold\">{totalRegistrations}</div>\r\n          </div>\r\n          <div className=\"glass p-6\">\r\n            <div className=\"text-white/40 text-sm mb-2\">ÂæÖÁ°ÆËÆ§</div>\r\n            <div className=\"text-3xl font-bold text-yellow-400\">\r\n              {Object.values(registrationCounts).reduce((sum, count) => sum + count.pending, 0)}\r\n            </div>\r\n          </div>\r\n          <div className=\"glass p-6\">\r\n            <div className=\"text-white/40 text-sm mb-2\">Â∑≤ÂèÇÂä†</div>\r\n            <div className=\"text-3xl font-bold text-green-400\">\r\n              {Object.values(registrationCounts).reduce((sum, count) => sum + count.attended, 0)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ê¥ªÂä®ÂàóË°® */}\r\n        <div className=\"space-y-4\">\r\n          {events.length === 0 ? (\r\n            <div className=\"glass p-8 text-center text-white/40\">\r\n              ÊöÇÊó†Ê¥ªÂä®\r\n            </div>\r\n          ) : (\r\n            events.map((event, index) => {\r\n              const count = registrationCounts[event.id] || {\r\n                total: 0,\r\n                pending: 0,\r\n                confirmed: 0,\r\n                attended: 0,\r\n                absent: 0,\r\n              };\r\n\r\n              return (\r\n                <motion.div\r\n                  key={event.id}\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ delay: index * 0.05 }}\r\n                  onClick={() => router.push(`/admin/events/${event.id}/registrations`)}\r\n                  className=\"glass p-6 hover:bg-white/10 transition-all cursor-pointer group\"\r\n                >\r\n                  <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-3 mb-3\">\r\n                        <Calendar className=\"w-5 h-5 text-amber-500\" />\r\n                        <h3 className=\"text-xl font-display group-hover:text-amber-200 transition-colors\">\r\n                          {event.title}\r\n                        </h3>\r\n                      </div>\r\n                      <div className=\"space-y-2 text-sm text-white/60 mb-4\">\r\n                        <div>üìÖ {event.time}</div>\r\n                        <div>üìç {event.location}</div>\r\n                      </div>\r\n                      <div className=\"flex gap-4 text-sm\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <Users className=\"w-4 h-4 text-white/40\" />\r\n                          <span className=\"text-white/80\">ÊÄªËÆ°: {count.total}</span>\r\n                        </div>\r\n                        <div className=\"text-yellow-400\">ÂæÖÁ°ÆËÆ§: {count.pending}</div>\r\n                        <div className=\"text-blue-400\">Â∑≤Á°ÆËÆ§: {count.confirmed}</div>\r\n                        <div className=\"text-green-400\">Â∑≤ÂèÇÂä†: {count.attended}</div>\r\n                        <div className=\"text-red-400\">Êú™ÂèÇÂä†: {count.absent}</div>\r\n                      </div>\r\n                    </div>\r\n                    <ChevronRight className=\"w-6 h-6 text-white/40 group-hover:text-white group-hover:translate-x-1 transition-all\" />\r\n                  </div>\r\n                </motion.div>\r\n              );\r\n            })\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"names":[],"mappings":"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"}}]
}